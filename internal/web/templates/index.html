<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>mailescrow</title>
<style>
  body { font-family: monospace; max-width: 900px; margin: 2rem auto; padding: 0 1rem; background: #f5f5f5; color: #222; }
  h1 { font-size: 1.4rem; margin-bottom: 1.5rem; }
  .empty { color: #888; }
  .card { background: #fff; border: 1px solid #ddd; border-radius: 4px; padding: 1rem; margin-bottom: 1.2rem; }
  .meta { font-size: 0.85rem; color: #555; margin-bottom: 0.5rem; }
  .meta span { margin-right: 1.5rem; }
  .subject { font-weight: bold; font-size: 1rem; margin-bottom: 0.5rem; }
  .badge { display: inline-block; font-size: 0.75rem; padding: 0.1rem 0.4rem; border-radius: 3px; margin-right: 0.5rem; vertical-align: middle; }
  .badge-outbound { background: #dbeafe; color: #1d4ed8; }
  .badge-inbound  { background: #dcfce7; color: #15803d; }
  pre { background: #f0f0f0; padding: 0.75rem; border-radius: 3px; overflow-x: auto; font-size: 0.8rem; white-space: pre-wrap; word-break: break-word; margin: 0.75rem 0; }
  .actions { display: flex; gap: 0.5rem; }
  button { padding: 0.4rem 1rem; border: none; border-radius: 3px; cursor: pointer; font-size: 0.9rem; }
  .approve { background: #2d8a4e; color: #fff; }
  .approve:hover { background: #246e3e; }
  .reject  { background: #c0392b; color: #fff; }
  .reject:hover  { background: #962d22; }
</style>
</head>
<body>
<h1>mailescrow â€” pending emails</h1>
{{if .}}
{{range .}}
<div class="card">
  <div class="subject">
    {{if eq .Direction "outbound"}}<span class="badge badge-outbound">&#8593; outbound</span>{{else}}<span class="badge badge-inbound">&#8595; inbound</span>{{end}}{{.Subject}}
  </div>
  <div class="meta">
    <span>From: {{.Sender}}</span>
    <span>To: {{join .Recipients ", "}}</span>
    <span>Received: {{.ReceivedAt.Format "2006-01-02 15:04:05 UTC"}}</span>
  </div>
  <pre>{{.Body}}</pre>
  <div class="actions">
    <form method="POST" action="/email/{{.ID}}/approve">
      {{if eq .Direction "outbound"}}<button class="approve" type="submit">Send</button>{{else}}<button class="approve" type="submit">Approve</button>{{end}}
    </form>
    <form method="POST" action="/email/{{.ID}}/reject">
      <button class="reject" type="submit">Reject</button>
    </form>
  </div>
</div>
{{end}}
{{else}}
<p class="empty">No pending emails.</p>
{{end}}
</body>
</html>
